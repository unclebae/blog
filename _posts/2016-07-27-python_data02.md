---
layout: post
title: Python Data Analysis 02 Numpy
---

## Numpy array 객체.
Numpy는 다차원 배열 객체를  제공하며 ndarray로 불린다. ndarray는 2개의 파트로 구성되어 있다. 

- actual data
- data 설명을 위한 메타 데이터

## Numpy array의 이점
Numpy배열은 일반적으로 단일 타입으로 저장되어야 한다. 
배열의 아이템이 동일한경우 이점은 배열을 위한 필요 크기를 확인하기 쉽게 해준다. 
NumPy 배열은 벡터 연산을 지원하며, 완벽한 배열 처리를 지원한다. 
반면 Python의 배열을 이용하는 경우라면 각 엘리먼트를 순회하면서 처리를 해야한다. 
또한 NumPy는 최적화된 C API를 이용하여 매우 빠른 처리를 지원한다. 

NumPy배열은 Python에서와 같이 인덱스를 이용하며, 0에서 부터 시작한다. 
데이터 타입은 특정 객체에 의해서 결정이 된다. 

NumPy배열은 다음과 같은 타입을 가진다. 

{% highlight python %}
In: a = arange(5)
In: a.dtype
Out: dtype('int64')
{% endhighlight %}

상기 코드는 int64 를 가진다. 만약 당신의 머신이 32bit라면 int34가 될것이다. 

벡터는 수학에서 공통으로 사용되는 것으로 높은 차원의 객체를 이요하고자 할때에는 반드시 필요하다. 
다음 코드를 보자. 


{% highlight python %}
In: a
Out: array([0, 1, 2, 3, 4])
In: a.shape
Out: (5, )
{% endhighlight %}

보는바와 같이 위 코드는 5개의 컴포넌트를 가진다. 값의 범위는 0 ~ 4를 가진다. 
shape 속성은 tuple이며, 튜플의 1의 엘리먼트는 5의 값으로 각 차원의 길이를 가지고 있다. 

## 다차원 배열 생성하기. 

{% highlight python %}
In: m = array([arange(2), arange(2)])
In: m
Out:
array([[0, 1],
	   [0, 1]])

In: m.shape
Out: (2, 2)
{% endhighlight %}

2 * 2 의 다차원 배열을 arange()를 이용하여 만들었다. 
array()함수는 객체로 부터 배열을 만들어내며, 이는 우리가 전달한 것이다. 
객체는 배열이어야 하며, 이 예에서는 배열의 리스트가 전달 되었다. 

NumPy 함수는 추가적인 아규먼트를 위한 힙을 가지려고 노력하며 이는 사전에 정의한 디폴트 옵션을 포함한다. 

## NumPy 배열 엘리먼트 선택하기. 

{% highlight python %}
In: a = array([[1,2], [3,4]])
In: a
Out:
array([[1, 2],
	   [3, 4]])

In: a[0, 0]
Out: 1

In: a[0,1]
Out: 2

In: a[1,0]
Out: 3

In: a[1,1]
Out: 4
{% endhighlight %}

보는바와 같이 엘리먼트를 선택하는 것은 매우 간단하다. 단순히 배열변수[m, n]으로 지정만 해주면 된다. 

## NumPy 수치 타입
NumPy는 과학 계산을 위한 도구이므로 다양한 타입이 있다. 

|Type|Description|
|bool|참/거짓 값으로 True혹은 False값을 가진다. bit에 저장됨 |
|int i|플랫폼 Integer값으로 일반적으로 int32 or int64를 가진다.|
|int8|Byte(-128 to 127)|
|int16|Integer(-32768 to 32767)|
|int32|Integer(-2 ** 31 to 2 ** 31-1)|
|int64|Integer(-2 ** 63 to 2 ** 63-1)|
|uint8|Unsigned integer (0 to 255)|
|uint16|Unsigned integer (0 to 65535)|
|uint32|Unsigned integer (0 to 2 ** 32 -1)|
|uint64|Unsigned integer (0 to 2 ** 64 -1)|
|float16|절반 정확도 float값을 가진다. sign bit과 5bit exponent, 10 bits mantissa|
|float32|단정도 정확도 float값을 가진다. sign bit, 8bit exponent, 23 bits mantiss|
|float64 or float|배정도 정확도 float값을 가진다. sign bit, 11bit exponent, 52 bits mantissa|
|complex64|복합수를 표현하며 32비트 플롯 형을 표현한다. |
|complex128 or complex|복합 수를 표현하며 64비트 플롯 형을 표현한다.|

## 데이터타입 객체
Data type object는 numpy.dtype클래스의 인스턴스이다. 데이터타입 객체는 바이트 내에 존재하는 데이터의 크기를 알려준다. 
바이트 크기는 itemsize속성으로 알 수 있다. 

{% highlight python %}
In: a.dtype.itemsize
Out: 8
{% endhighlight %}

## 캐릭터 코드 
Character code는 Numeric과 함께 backward compatibility를 제공하기 위해 포함되었다. 
Numeric은 NumPy의 전신이며 추천하지 않는다.

|Type|Character code|
|integer|i|
|Unsigned integer|u|
|Single precision  float|f|
|Double precision float|d|
|bool|b|
|complex|D|
|string|S|
|unicode|U|
|Void|V|

예제 )

{% highlight python %}
In: arange(7, dtyp='f')
Out: array([0., 1., 2., 3., 4., 5., 6.], dtype=float32)

In: arange(7, dtype='D')
Out: array([0.+0.j, 1.+0.j, 2.+0.j, 3.+0.j, 4.+0.j, 5.+0.j, 6.+0.j])
{% endhighlight %}

